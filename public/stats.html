<!doctype html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Stats</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>

<style>
  html, body {
    height: 100%;
    background-color: #222;
    color: #fff;
    margin: 0;
    align-items: center;
    background: #222;
    color: #fff;
  }

  body {
    font-family:
      -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial,
      sans-serif;
    max-width: 38rem;
    padding: 2rem;
  }

  button {
    margin-top: 1rem;
    background: #555;
    color: white;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
  }

  button:hover {
    background: #777;
  }

  .custom-window-controls {
    position: fixed;
    bottom: 20px;
    left: 20px;
    display: flex;
    gap: 10px;
    z-index: 9999;
  }

  .custom-window-controls button {
    background: #333;
    color: white;
    border: none;
    border-radius: 6px;
    width: 32px;
    height: 32px;
    font-size: 18px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .custom-window-controls button:hover {
    background: #555;
  }
</style>

<body>
  <nav class="navbar fixed-top navbar-dark navbar-expand  bg-dark">
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a class="nav-item nav-link" href="sniff.html">Sniff SniffðŸ˜¢</a></li>
        <li><a class="nav-item nav-link" href="">Statistics</a></li>
      </ul>
    </div>
    </div>
  </nav>
  <br>
  <br>
    <h1>Stats fr</h1>
    <div id="stats" class="container mt-4"></div>
    <div class="container mt-4">
      <h2>Ads to support us :</h2>
      <video id="adVideo" width="640" height="360" autoplay>
        <source src="ads/barbies.mp4" type="video/mp4">
      </video>
    </div>
    <script type="module">
      document.getElementById('minimize')?.addEventListener('click', () => {
    window.electronAPI.minimize();
    });

    document.getElementById('maximize')?.addEventListener('click', () => {
        window.electronAPI.maximize();
    });

    document.getElementById('close')?.addEventListener('click', () => {
        window.electronAPI.close();
    });
      const good = parseInt(localStorage.getItem('goodAnswers'));
      const total = parseInt(localStorage.getItem('totalAnswers'));
      const wrong = total - good;

      if (total > 0) {
        const percentGood = Math.round((good / total) * 100);
        const percentBad = 100 - percentGood;

        stats.innerHTML = `
          <p><strong>Good answers:</strong> ${good}</p>
          <p><strong>Wrong answers:</strong> ${wrong}</p>
          <p><strong>Success rate:</strong></p>

          <div class="progress" style="height: 25px;">
            <div class="progress-bar bg-success" role="progressbar"
                style="width: ${percentGood}%;"
                aria-valuenow="${percentGood}" aria-valuemin="0" aria-valuemax="100">
              Good : ${percentGood}%
            </div>
            <div class="progress-bar bg-danger" role="progressbar"
                style="width: ${percentBad}%;"
                aria-valuenow="${percentBad}" aria-valuemin="0" aria-valuemax="100">
              Fails : ${percentBad}%
            </div>
          </div>
        `;
      } else {
        stats.innerHTML = `<p class="text-muted">No data</p>`;
      }
    </script>
    <script>
      const videos = [
        "ads/barbies.mp4",
        "ads/chest.mp4",
        "ads/safari.mp4",
        "ads/marineland.mp4",
      ];

      const videoElement = document.getElementById('adVideo');

      function playRandomVideo() {
        const randomVideo = videos[Math.floor(Math.random() * videos.length)];
        videoElement.src = randomVideo;
        videoElement.play();
      }

      // Start the first video
      playRandomVideo();

      // Automatically play a new random video when the current one ends
      videoElement.addEventListener('ended', playRandomVideo);
    </script>
    <script type="module" src="site.ts"></script>
    <div class="custom-window-controls">
      <button id="minimize">â€“</button> <!-- TODO: REMOVE IN PRODUCTION ðŸ¤¡ðŸ¤¡ðŸ¤¡ -->
      <!-- <button id="maximize">â–¡</button> -->
      <button id="close">Ã—</button>
    </div>
  </body>
</html>